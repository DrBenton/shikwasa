!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Shikwasa=e():t.Shikwasa=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e){t.exports='<div class="shk_cover">\n  <div class="shk_img">\n  </div>\n  <button class="shk_btn shk_btn_toggle" aria-label="toggle play and pause">\n    <svg class="shk_btn_play" aria-hidden="true">\n      <use xlink:href="#shk_icon_play" />\n    </svg>\n    <svg class="shk_btn_pause" aria-hidden="true" viewbox="0 0 82 82">\n      <g fill="#FFFFFF" stroke-width="1" fill-rule="evenodd" transform="translate(1.000000, 1.000000)">\n        <rect id="shk_path_rectangle" x="28" y="20" width="6" height="40"></rect>\n        <use xlink:href="#shk_path_rectangle" x="18" />\n        <circle stroke="#FFFFFF" stroke-width="2" fill-opacity="0.3" fill-rule="nonzero" cx="40" cy="40" r="40"></circle>\n      </g>\n    </svg>\n  </button>\n</div>\n<div class="shk_main">\n  <div class="shk_text">\n    <div>\n      <span class="shk_subtitle"></span>\n    </div>\n    <div>\n      <span class="shk_title"></span>\n    </div>\n  </div>\n  <div class="shk_controls">\n    <a class="shk_btn shk_btn_download" aria-label="download audio" title="download audio" target="_blank" download>\n      <svg aria-label="download audio">\n        <use xlink:href="#shk_icon_download" />\n      </svg>\n      </a>\n    <button class="shk_btn shk_btn_backward" aria-label="rewind 10 seconds" title="rewind 10 seconds">\n      <svg aria-hidden="true">\n        <use xlink:href="#shk_icon_backward" />\n      </svg>\n    </button>\n    <button class="shk_btn shk_btn_forward" aria-label="forward 10 seconds" title="forward 10 seconds">\n      <svg aria-hidden="true">\n        <use xlink:href="#shk_icon_forward" />\n      </svg>\n    </button>\n    <button class="shk_btn shk_btn_speed" aria-label="toggle playback rate" title="change playback rate" aria-live="polite">1.0x</button>\n    <button class="shk_btn shk_btn_volume" aria-label="toggle volume" title="toggle volume">\n      <svg class="shk_btn_unmute" aria-hidden="true">\n        <use xlink:href="#shk_icon_unmute" />\n      </svg>\n      <svg class="shk_btn_mute" aria-hidden="true">\n        <use xlink:href="#shk_icon_mute" />\n      </svg>\n    </button>\n  </div>\n  <div class="shk_bar-wrap">\n    <div class="shk_bar" aria-label="progress bar">\n      <div class="shk_bar_played" aria-label="played progress">\n        <span class="bar-handle" aria-label="progress bar handle"></span>\n      </div>\n      <div class="shk_bar_loaded" aria-label="loaded progress"></div>\n    </div>\n  </div>\n  <div class="shk_bottom">\n    <span class="shk_loader" aria-live="polite">\n      <span class="shk_visuallyhidden" tabindex="-1">loading</span>\n      <svg aria-hidden="true" aria-label="loading" aria-live="polite" viewbox="0 0 66 66">\n        <circle cx="33" cy="33" r="30" fill="transparent" stroke="url(#shk_gradient)" stroke-dasharray="170"\n          stroke-dashoffset="20" stroke-width="6" />\n        <lineargradient id="shk_gradient">\n          <stop offset="50%" stop-color="currentColor" />\n          <stop offset="65%" stop-color="currentColor" stop-opacity=".5" />\n          <stop offset="100%" stop-color="currentColor" stop-opacity="0" />\n        </lineargradient>\n      </svg>\n    </span>\n    <span class="shk_time">\n      <span class="shk_time_now">--:--</span><span class="shk_time_duration">--:--</span>\n    </span>\n  </div>\n</div>\n'},function(t,e){t.exports='<svg class="shk_icons" xmlns="http://www.w3.org/2000/svg">\n  <symbol id="shk_icon_play" viewbox="0 0 82 82">\n    <g fill="none" fill-rule="evenodd">\n      <circle stroke="#FFF" stroke-width="2" fill-opacity=".3" fill="#FFF" cx="41" cy="41" r="40" />\n      <path d="M27.8 57c-1 0-1.8-.8-1.8-1.6V27.6c0-.9.8-1.6 1.8-1.6l28.6 14.3s1.3 1.2 0 2.4-28.6 14.2-28.6 14.2z"\n        fill="#FBF9F9" />\n    </g>\n  </symbol>\n\n  <symbol id="shk_icon_pause" viewbox="0 0 82 82">\n    <g fill="#FFFFFF" stroke-width="1" fill-rule="evenodd" transform="translate(1.000000, 1.000000)">\n      <rect id="shk_path_rectangle" x="28" y="20" width="6" height="40"></rect>\n      <use xlink:href="#shk_path_rectangle" x="18"></use>\n      <circle stroke="#FFFFFF" stroke-width="2" fill-opacity="0.3" fill-rule="nonzero" cx="40" cy="40" r="40">\n      </circle>\n    </g>\n  </symbol>\n\n  <symbol id="shk_icon_download" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">\n    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" />\n  </symbol>\n\n  <symbol id="shk_icon_backward" viewbox="0 0 22 24">\n    <path\n      d="M0 12.95h2.4a8.61 8.61 0 0 0 8.6 8.63c4.75 0 8.6-3.86 8.6-8.63A8.61 8.61 0 0 0 11 4.32V1.9c6.08 0 11 4.95 11 11.05C22 19.05 17.08 24 11 24S0 19.05 0 12.95z" />\n    <path\n      d="M7.14 8.1h1.21v9.86h-1.6v-7.92c-.6.54-1.34.94-2.25 1.2v-1.6A5.82 5.82 0 0 0 7.14 8.1zM13.92 7.9c1.14 0 2.04.47 2.68 1.44.6.9.91 2.14.91 3.69 0 1.54-.3 2.77-.9 3.68a3.07 3.07 0 0 1-2.69 1.44 3.04 3.04 0 0 1-2.68-1.44c-.6-.9-.9-2.14-.9-3.68 0-1.55.3-2.78.9-3.7a3.01 3.01 0 0 1 2.68-1.43zm0 1.37c-.78 0-1.33.43-1.65 1.31-.22.6-.33 1.41-.33 2.45 0 1.02.11 1.83.33 2.44.32.87.87 1.31 1.65 1.31.77 0 1.32-.44 1.65-1.3.22-.62.33-1.43.33-2.45 0-1.04-.1-1.86-.33-2.45-.33-.88-.88-1.31-1.65-1.31zM2.75 3.28L11 6.56V0z" />\n  </symbol>\n\n  <symbol id="shk_icon_forward" viewbox="0 0 22 24">\n    <path\n      d="M11 1.9v2.42a8.61 8.61 0 0 0-8.6 8.63 8.61 8.61 0 0 0 8.6 8.63c4.75 0 8.6-3.86 8.6-8.63H22C22 19.05 17.08 24 11 24S0 19.05 0 12.95C0 6.85 4.92 1.9 11 1.9z" />\n    <path\n      d="M7.1 8.12h1.22v9.86H6.7v-7.92c-.6.54-1.33.94-2.24 1.2v-1.6A5.82 5.82 0 0 0 7.1 8.12zM13.9 7.94c1.14 0 2.04.47 2.68 1.44.6.91.91 2.14.91 3.69 0 1.54-.3 2.77-.9 3.69a3.07 3.07 0 0 1-2.69 1.43 3.04 3.04 0 0 1-2.68-1.43c-.6-.92-.9-2.15-.9-3.7 0-1.54.3-2.77.9-3.68a3.01 3.01 0 0 1 2.68-1.44zm0 1.37c-.78 0-1.33.43-1.65 1.31-.22.6-.33 1.41-.33 2.45 0 1.02.11 1.83.33 2.44.32.87.87 1.31 1.65 1.31.77 0 1.32-.44 1.65-1.3.22-.62.33-1.43.33-2.45 0-1.04-.1-1.85-.33-2.45-.33-.88-.88-1.31-1.65-1.31zM19.25 3.28L11 6.56V0z" />\n  </symbol>\n\n  <symbol id="shk_icon_unmute" viewbox="0 0 508.514 508.514" style="enable-background:new 0 0 508.514 508.514;">\n    <path d="M271.483,0.109c-5.784-0.54-12.554,0.858-20.531,5.689c0,0-132.533,115.625-138.286,121.314\n      H39.725c-17.544,0.032-31.782,14.27-31.782,31.814v194.731c0,17.607,14.239,31.782,31.782,31.782h72.941\n      c5.753,5.753,138.286,117.277,138.286,117.277c7.977,4.799,14.747,6.229,20.531,5.689c11.76-1.112,20.023-10.965,22.534-21.358\n      c0.127-1.017,0.127-464.533-0.032-465.55C291.506,11.074,283.211,1.222,271.483,0.109z" />\n    <path d="M342.962,309.798c-7.85,3.973-10.997,13.508-7.087,21.358c2.829,5.53,8.422,8.74,14.207,8.74\n      c2.384,0,4.799-0.572,7.151-1.684c32.132-16.209,52.091-48.341,52.091-83.938s-19.959-67.728-52.091-83.938\n      c-7.85-3.973-17.385-0.795-21.358,7.056c-3.909,7.85-0.763,17.385,7.087,21.358c21.326,10.743,34.579,32.005,34.579,55.524\n      S364.288,299.055,342.962,309.798z" />\n    <path\n      d="M339.72,59.32c-8.486-1.716-17.004,3.941-18.593,12.522c-1.716,8.645,3.909,17.004,12.522,18.688\n      c78.312,15.256,135.139,84.128,135.139,163.743S411.962,402.761,333.65,418.017c-8.613,1.684-14.239,10.011-12.554,18.656\n      c1.494,7.596,8.136,12.84,15.542,12.84l3.083-0.318c93.218-18.148,160.851-100.147,160.851-194.922S432.938,77.5,339.72,59.32z" />\n  </symbol>\n\n  <symbol id="shk_icon_mute" viewbox="0 0 508.528 508.528" style="enable-background:new 0 0 508.528 508.528;">\n    <path d="M263.54,0.116c-5.784-0.54-12.554,0.858-20.531,5.689c0,0-132.533,115.625-138.317,121.314H31.782\n      C14.239,127.15,0,141.389,0,158.933v194.731c0,17.607,14.239,31.782,31.782,31.782h72.941\n      c5.784,5.753,138.317,117.277,138.317,117.277c7.977,4.799,14.747,6.229,20.531,5.689c11.76-1.112,20.023-10.965,22.534-21.358\n      c0.095-1.017,0.095-464.533-0.064-465.55C283.563,11.081,275.268,1.228,263.54,0.116z" />\n    <path d="M447.974,254.28l54.857-54.857c7.596-7.564,7.596-19.864,0-27.428\n      c-7.564-7.564-19.864-7.564-27.428,0l-54.857,54.888l-54.888-54.888c-7.532-7.564-19.864-7.564-27.397,0\n      c-7.564,7.564-7.564,19.864,0,27.428l54.857,54.857l-54.857,54.888c-7.564,7.532-7.564,19.864,0,27.396\n      c7.532,7.564,19.864,7.564,27.396,0l54.888-54.857l54.857,54.857c7.564,7.564,19.864,7.564,27.428,0\n      c7.564-7.532,7.564-19.864,0-27.396L447.974,254.28z" />\n  </symbol>\n\n  <symbol id="shk_icon_indicator" viewbox="0 0 66 66">\n    <circle cx="33" cy="33" r="30" fill="transparent" stroke="url(#shk_gradient)" stroke-dasharray="170" stroke-dashoffset="20"\n      stroke-width="6" />\n    <lineargradient id="shk_gradient">\n      <stop offset="50%" stop-color="currentColor" />\n      <stop offset="65%" stop-color="currentColor" stop-opacity=".5" />\n      <stop offset="100%" stop-color="currentColor" stop-opacity="0" />\n    </lineargradient>\n  </symbol>\n</svg>\n'},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(2);var i,a,s=n(0),o=n.n(s),r=n(1),l=n.n(r),d={container:"body",fixed:{type:"auto",position:"bottom"},download:!1,themeColor:"#00869B",autoPlay:!1,muted:!1,preload:"metadata",speedOptions:[.5,.75,1.25,1.5],audio:null};function u(t){t=Math.round(t);var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),i=Math.floor(t-3600*e-60*n);return n=n<10?"0"+n:n,i=i<10?"0"+i:i,0===e?(e=e<10?"0"+e:e,"".concat(n,":").concat(i)):"".concat(e,":").concat(n,":").concat(i)}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:t.title,artist:t.artist,artwork:[{src:t.cover}]}),Object.entries(e).length&&e.constructor===Object&&Object.keys(e).forEach((function(t){navigator.mediaSession.setActionHandler(t,e[t].bind(n))})))}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,a=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(a)throw s}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mounted=!1,document.querySelector(".shk_icons")||(this.icons=document.createElement("div"),this.icons.classList.add("shk_icons"),this.icons.innerHTML=l.a),this.initVariable(),this.initOptions(e)}var e,n,s;return e=t,(n=[{key:"initVariable",value:function(){this.el=document.createElement("div"),this.el.tabIndex=0,this.el.classList.add("shk"),this.el.innerHTML=o.a,this.playBtn=this.el.querySelector(".shk_btn_toggle"),this.downloadBtn=this.el.querySelector(".shk_btn_download"),this.fwdBtn=this.el.querySelector(".shk_btn_forward"),this.bwdBtn=this.el.querySelector(".shk_btn_backward"),this.speedBtn=this.el.querySelector(".shk_btn_speed"),this.muteBtn=this.el.querySelector(".shk_btn_volume"),this.artist=this.el.querySelector(".shk_subtitle"),this.texts=this.el.querySelector(".shk_text"),this.title=this.el.querySelector(".shk_title"),this.subtitle=this.el.querySelector(".shk_subtitle"),this.currentTime=this.el.querySelector(".shk_time_now"),this.duration=this.el.querySelector(".shk_time_duration"),this.bar=this.el.querySelector(".shk_bar"),this.barWrap=this.el.querySelector(".shk_bar-wrap"),this.audioPlayed=this.el.querySelector(".shk_bar_played"),this.audioLoaded=this.el.querySelector(".shk_bar_loaded"),this.handle=this.el.querySelector(".bar-handle"),this.cover=this.el.querySelector(".shk_img")}},{key:"initOptions",value:function(t){this.el.style="--theme-color: ".concat(t.themeColor),this.el.style.boxShadow="0px 0px 14px 6px ".concat(t.themeColor,"20"),this.audioPlayed.style.color=t.themeColor+"70",t.autoPlay?this.el.classList.add("Play"):this.el.classList.add("Pause"),t.download&&t.audio&&t.audio.src?this.downloadBtn.href=t.audio.src:this.downloadBtn.remove(),"static"!==t.fixed.type&&("fixed"===t.fixed.type?this.el.classList.add("Fixed"):this.el.classList.add("Auto"),"top"===t.fixed.position&&this.el.classList.add("Top")),t.muted&&this.el.classList.add("Mute"),t.audio&&this.update(t.audio)}},{key:"update",value:function(t){this.cover.style.backgroundImage="url(".concat(t.cover,")"),this.title.innerHTML=t.title,this.mounted&&this.textScroll(),this.artist.innerHTML=t.artist,this.currentTime.innerHTML="00:00",this.duration.innerHTML=t.duration?u(t.duration):"00:00",this.downloadBtn.href=t.src}},{key:"textScroll",value:function(){a&&(clearInterval(a),clearTimeout(i));var t=this.title.offsetWidth-this.texts.offsetWidth;if(t>0){var e=h(function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,s=50*i,o=s+a;function r(){t.style.transitionDuration="".concat(s/1e3,"s"),t.style.transform="translateX(-".concat(i,"px)"),e=setTimeout((function(){t.style.transform="translateX(0px)"}),o)}return r(),n=setInterval((function(){return r()}),2*o),[e,n]}(this.title,t),2);i=e[0],a=e[1]}else this.title.style.transform="none",this.title.style.transitionDuration="0s"}},{key:"mount",value:function(t){t.innerHTML="",t.append(this.el),this.icons&&t.append(this.icons),this.mounted=!0,this.textScroll()}},{key:"destroy",value:function(){clearInterval&&(clearInterval(a),clearTimeout(i))}}])&&p(e.prototype,n),s&&p(e,s),t}();function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audioPlayed=e.audioPlayed,this.audioLoaded=e.audioLoaded}var e,n,i;return e=t,(n=[{key:"set",value:function(t,e){e=Math.min(e,1),e=Math.max(e,0),this[t].style.width=100*e+"%"}}])&&v(e.prototype,n),i&&v(e,i),t}();function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audioEvents=["abort","canplay","canplaythrough","complete","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.events={}}var e,n,i;return e=t,(n=[{key:"on",value:function(t,e){this.audioEvents.includes(t)&&"function"==typeof e?(this.events[t]||(this.events[t]=[]),this.events[t].push(e)):console.error("invalid event name or callback function")}},{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.events[t]&&this.events[t].length&&this.events[t].forEach((function(t){return t(e)}))}}])&&k(e.prototype,n),i&&k(e,i),t}();function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g,_=[],w="undefined"!=typeof window&&/mobile/i.test(window.navigator.userAgent),x=w?"touchstart":"mousedown",L=w?"touchmove":"mousemove",S=w?"touchend":"mouseup",M=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=_.length,_.push(this),this.inited=!1,this.canplay=!1,this.dragging=!1,this.options=function(t){return t.container=document.querySelector(t.container?t.container:d.container),t.fixed=t.fixed||d.fixed,t.download="boolean"==typeof t.download?t.download:d.download,["auto","static","fixed"].filter((function(e){return e===t.fixed.type}))[0]||(t.fixed.type=d.fixed.type),t.themeColor=t.themeColor||d.themeColor,t.autoPlay=t.autoPlay||d.autoPlay,t.muted=t.muted||d.muted,t.preload=t.preload||d.preload,t.speedOptions=t.speedOptions||d.speedOptions,Array.isArray(t.speedOptions)||(t.speedOptions=[t.speedOptions]),t.speedOptions.includes(1)||t.speedOptions.push(1),t.speedOptions=t.speedOptions.map((function(t){return parseFloat(t)})).filter((function(t){return!isNaN(t)})),t.speedOptions.length>1&&t.speedOptions.sort((function(t,e){return t-e})),t.audio?(t.audio.title=t.audio.title||"Unknown Title",t.audio.artist=t.audio.artist||"Unknown Artist",t.audio.cover=t.audio.cover||null,t.audio.duration=t.audio.duration||0):console.error("audio is not specified"),t}(e),this.muted=this.options.muted,this.initUI(),this.initKeyEvents(),this.currentSpeed=1,this.events=new m,this.initAudio(),this.template.mount(this.options.container)}var e,n,i;return e=t,(n=[{key:"initUI",value:function(){this.template=new f(this.options),this.el=this.template.el,this.bar=new y(this.template),this.initButtonEvents(),this.initBarEvents()}},{key:"initButtonEvents",value:function(){var t=this;this.template.playBtn.addEventListener("click",(function(){t.toggle()})),this.template.muteBtn.addEventListener("click",(function(){t.muted=!t.muted,t.el.classList.toggle("Mute"),t.audio&&(t.audio.muted=t.muted)})),this.template.fwdBtn.addEventListener("click",(function(){t.seekForward()})),this.template.bwdBtn.addEventListener("click",(function(){t.seekBackward()})),this.template.speedBtn.addEventListener("click",(function(){var e,n,i=t.options.speedOptions.indexOf(t.currentSpeed),a=t.options.speedOptions;t.currentSpeed=i+1>=a.length?a[0]:a[i+1],t.template.speedBtn.innerHTML=(e=t.currentSpeed,("0"===(n=parseFloat(e).toFixed(2)).slice(-1)?n.slice(0,-1):n)+"x"),t.audio&&(t.audio.playbackRate=t.currentSpeed)}))}},{key:"initBarEvents",value:function(){var t,e=this,n=function(n){var i=((n.clientX||n.changedTouches&&n.changedTouches[0].clientX||0)-e.template.barWrap.getBoundingClientRect().left)/e.template.barWrap.clientWidth;i=Math.min(i,1),i=Math.max(0,i),t=i*e.duration,e.setDisplayAndBarByTime(t)},i=function i(){e.dragging=!1,e.el.classList.remove("Seeking"),e.seek(t),document.removeEventListener(L,n),document.removeEventListener(S,i)};this.template.barWrap.addEventListener(S,(function(i){e.dragging||(n(i),e.seek(t))})),this.template.handle.addEventListener(x,(function(){e.el.classList.add("Seeking"),e.dragging=!0,document.addEventListener(L,n),document.addEventListener(S,i)}))}},{key:"initKeyEvents",value:function(){var t=this;this.el.addEventListener("keyup",(function(e){32===e.keyCode&&(document.activeElement.classList.contains("shk_btn_toggle")||t.toggle())}))}},{key:"initAudio",value:function(){var t=this;this.options.audio.src&&(this.audio=new Audio,this.audio.title=this.options.audio.title,this.initLoadingEvents(),this.initAudioEvents(),this.events.audioEvents.forEach((function(e){t.audio.addEventListener(e,(function(n){t.events.trigger(e,n)}))})),"none"!==this.options.preload&&(this.updateAudio(this.options.audio.src),this.inited=!0))}},{key:"initAudioEvents",value:function(){var t=this;this.on("play",(function(){t.el.classList.contains("Pause")&&t.setUIPlaying(),_.forEach((function(e){e.id!==t.id&&e.audio&&!e.audio.paused&&e.pause()}))})),this.on("pause",(function(){t.el.classList.contains("Play")&&t.setUIPaused()})),this.on("ended",(function(){t.setUIPaused(),t.seek(0)})),this.on("durationchange",(function(){1!==t.duration&&(t.template.duration.innerHTML=u(t.duration))})),this.on("progress",(function(){if(t.audio.buffered.length){var e=t.audio.buffered.length?t.audio.buffered.end(t.audio.buffered.length-1)/t.duration:0;t.bar.set("audioLoaded",e)}})),this.on("timeupdate",(function(){t.dragging||t.setDisplayAndBarByTime(t.audio.currentTime)}))}},{key:"initLoadingEvents",value:function(){var t=this;this.on("canplaythrough",(function(){t.el.classList.contains("Loading")&&t.el.classList.remove("Loading")})),this.on("waiting",(function(){t.el.classList.contains("Loading")||t.el.classList.add("Loading")})),this.on("canplay",(function(){t.canplay||(t.canplay=!0,g&&t.seek(g))}))}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"setDisplayAndBarByTime",value:function(t){var e=(t=t||0)/this.duration||0;this.template.currentTime.innerHTML=u(t),this.bar.set("audioPlayed",e)}},{key:"setUIPlaying",value:function(){this.el.classList.add("Play"),this.el.classList.remove("Pause")}},{key:"setUIPaused",value:function(){this.el.classList.add("Pause"),this.el.classList.remove("Play"),this.el.classList.remove("Loading")}},{key:"play",value:function(t){var e=this;if(this.inited||(this.audio.src=this.options.audio.src,this.inited=!0),t&&t.src&&(this.template.update(t),this.updateAudio(t.src)),this.audio.paused){var n=this.audio.play(),i=this,a=t||this.options.audio,s={play:this.play,pause:this.pause,seekforward:this.seekForward,seekbackward:this.seekBackward};n instanceof Promise?(n.then((function(){c(a,s,i)})),n.catch((function(t){"NotAllowedError"!==t.name&&"NotSupportedError"!==t.name||e.pause()}))):c(a,s,i)}}},{key:"pause",value:function(){this.audio.paused||this.audio.pause()}},{key:"toggle",value:function(){this.inited||(this.audio.src=this.options.audio.src,this.inited=!0),this.audio.paused?this.play():this.pause()}},{key:"seek",value:function(t){var e=parseInt(t);isNaN(e)?console.error("seeking time is NaN"):(e=Math.min(e,this.duration),e=Math.max(e,0),this.setDisplayAndBarByTime(e),this.canplay?this.audio&&(this.audio.currentTime=e):g=t)}},{key:"seekForward",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=Math.min(this.duration,this.audio.currentTime+t);this.seek(e)}},{key:"seekBackward",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=Math.max(0,this.audio.currentTime-t);this.seek(e)}},{key:"updateAudio",value:function(t){this.audio.src=t,this.audio.preload=this.options.preload,this.audio.muted=this.muted,this.options.autoplay&&this.muted&&(this.audio.autoplay=this.options.autoPlay),this.audio.playbackRate=this.currentSpeed}},{key:"destroyAudio",value:function(){this.audio.pause(),this.audio.src="",this.audio.load(),this.audio=null}},{key:"destroy",value:function(){this.destroyAudio(),this.template.destroy(),this.options.container.innerHTML=""}},{key:"duration",get:function(){return this.audio&&this.audio.src?isNaN(this.audio.duration)?this.options.audio.duration:this.audio.duration:this.options.audio.duration}},{key:"currentTime",get:function(){return this.audio?this.audio.currentTime:void 0}}])&&b(e.prototype,n),i&&b(e,i),t}();e.default=M;console.log('%c🍊%c Shikwasa Podcast Player v"1.0.7" %c https://jessuni.github.io/shikwasa/',"background-color:#00869B40;padding:4px;","background:#00869B80;color:#fff;padding:4px 0","padding: 2px 0;")}])}));