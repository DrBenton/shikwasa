{"version":3,"file":"shikwasa.min.js","sources":["../src/templates/Player.js","../src/templates/Icon.js","../src/config.js","../src/utils.js","../src/focus-visible.js","../src/ui.js","../src/events.js","../src/player.js","../src/main.js"],"sourcesContent":["const PlayerTemplate = /* template */`\n  <div class=\"shk-player\">\n    <div class=\"shk-bar_wrap\">\n      <div class=\"shk-bar\" aria-label=\"progress bar\">\n        <div class=\"shk-bar_loaded\"\n          role=\"progressbar\"\n          aria-label=\"loaded progress\"\n          aria-valuenow=\"0\"\n          aria-valuemin=\"0\"\n          aria-valuemax=\"1\"></div>\n        <div class=\"shk-bar_played\"\n          role=\"progressbar\"\n          aria-label=\"played progress\"\n          aria-valuenow=\"0\"\n          aria-valuemin=\"0\"\n          aria-valuemax=\"1\">\n          <button class=\"shk-bar-handle\"\n            role=\"slider\"\n            aria-label=\"seek progress\"\n            aria-valuenow=\"0\"\n            aria-valuemin=\"0\"\n            aria-orientation=\"horizontal\"\n            aria-valuemax=\"1\"></button>\n        </div>\n      </div>\n    </div>\n    <div class=\"shk-body\">\n      <div class=\"shk-cover\">\n        <div class=\"shk-img\"></div>\n      </div>\n      <div class=\"shk-main\">\n        <div class=\"shk-text\">\n          <div class=\"shk-artist_wrap\">\n            <span class=\"shk-artist\"></span>\n          </div>\n          <div class=\"shk-title_wrap\">\n            <div class=\"shk-title_inner\">\n              <span class=\"shk-title\"></span>\n            </div>\n          </div>\n        </div>\n        <div class=\"shk-controls\">\n          <div class=\"shk-controls_basic\">\n            <button class=\"shk-btn shk-btn_speed\"\n              aria-label=\"toggle playback rate\"\n              title=\"change playback rate\"\n              aria-live=\"polite\">1.0x</button>\n            <button class=\"shk-btn shk-btn_backward\"\n              aria-label=\"rewind 10 seconds\"\n              title=\"rewind 10 seconds\">\n              <svg aria-hidden=\"true\">\n                <use xlink:href=\"#shk-icon_backward\" />\n              </svg>\n            </button>\n            <button class=\"shk-btn shk-btn_toggle\" aria-label=\"toggle play and pause\">\n              <svg class=\"shk-btn_play\" aria-hidden=\"true\">\n                <use xlink:href=\"#shk-icon_play\" />\n              </svg>\n              <svg class=\"shk-btn_pause\" aria-hidden=\"true\">\n                <use xlink:href=\"#shk-icon_pause\" />\n              </svg>\n            </button>\n            <button class=\"shk-btn shk-btn_forward\" aria-label=\"forward 10 seconds\" title=\"forward 10 seconds\">\n              <svg aria-hidden=\"true\">\n                <use xlink:href=\"#shk-icon_forward\" />\n              </svg>\n            </button>\n            <button class=\"shk-btn shk-btn_more\" aria-label=\"more controls\" title=\"more controls\">\n              <svg aria-hidden=\"true\">\n                <use xlink:href=\"#shk-icon_more\" />\n              </svg>\n            </button>\n          </div>\n          <div class=\"shk-controls_extra\">\n            <button class=\"shk-btn shk-btn_volume\" aria-label=\"toggle volume\" title=\"volume\">\n              <svg class=\"shk-btn_unmute\" aria-hidden=\"true\">\n                <use xlink:href=\"#shk-icon_unmute\" />\n              </svg>\n              <svg class=\"shk-btn_mute\" aria-hidden=\"true\">\n                <use xlink:href=\"#shk-icon_mute\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n        <div class=\"shk-display\">\n          <span class=\"shk-loader\" aria-live=\"polite\">\n            <span class=\"shk-visuallyhidden\" tabindex=\"-1\">loading</span>\n            <svg aria-hidden=\"true\" aria-label=\"loading\" aria-live=\"polite\" viewbox=\"0 0 66 66\">\n              <circle cx=\"33\" cy=\"33\" r=\"30\" fill=\"transparent\" stroke=\"url(#shk-gradient)\" stroke-dasharray=\"170\"\n                stroke-dashoffset=\"20\" stroke-width=\"6\" />\n              <lineargradient id=\"shk-gradient\">\n                <stop offset=\"50%\" stop-color=\"currentColor\" />\n                <stop offset=\"65%\" stop-color=\"currentColor\" stop-opacity=\".5\" />\n                <stop offset=\"100%\" stop-color=\"currentColor\" stop-opacity=\"0\" />\n              </lineargradient>\n            </svg>\n          </span>\n          <span class=\"shk-time\">\n            <span class=\"shk-time_now\">--:--</span><span class=\"shk-time_duration\">--:--</span>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n`\nexport default PlayerTemplate\n","const IconTemplate = /* template */`\n  <svg class=\"shk-icons\" xmlns=\"http://www.w3.org/2000/svg\">\n    <symbol id=\"shk-icon_play\" viewbox=\"0 0 64 64\">\n      <path\n        d=\"M32 0a32 32 0 1 1 0 64 32 32 0 0 1 0-64zm-9 17.8c-1 0-1.7.6-1.7 1.4v25.6c0 .8.8 1.4 1.7 1.4 0 0 25-12 26.2-13.1 1-1 .3-1.9.1-2.1z\" />\n    </symbol>\n\n    <symbol id=\"shk-icon_pause\" viewbox=\"0 0 64 64\">\n      <path fill-rule=\"nonzero\"\n        d=\"M32 0a32 32 0 1 0 0 64 32 32 0 0 0 0-64zm-4 40a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V24c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v16zm16 0a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V24c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v16z\" />\n    </symbol>\n\n    <symbol id=\"shk-icon_download\" viewbox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\">\n      <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3\" />\n    </symbol>\n\n    <symbol id=\"shk-icon_forward\" viewbox=\"0 0 128 139\">\n      <path\n        d=\"M64 11v14h-.8A50 50 0 1 0 114 75h14a64 64 0 1 1-64-64zm16.9 35c6.6 0 11.8 2.7 15.6 8.3a38 38 0 0 1 5.3 21.4c0 9-1.8 16-5.3 21.3-3.8 5.6-9 8.4-15.6 8.4-6.7 0-12-2.8-15.6-8.4A38 38 0 0 1 60 75.7c0-9 1.8-16.1 5.3-21.4C69 48.7 74.2 46 80.9 46zm-32.5 1v57.1H39V58.3a32.3 32.3 0 0 1-13 7V56a34 34 0 0 0 15.4-9h7zm32.5 7c-4.6 0-7.8 2.4-9.6 7.5-1.3 3.5-2 8.2-2 14.2 0 5.9.7 10.6 2 14.1 1.8 5 5 7.6 9.6 7.6 4.5 0 7.7-2.5 9.6-7.6 1.3-3.5 1.9-8.2 1.9-14.1 0-6-.6-10.7-2-14.2-1.8-5.1-5-7.6-9.5-7.6zM64 0l48 19-48 19V0z\" />\n    </symbol>\n\n    <symbol id=\"shk-icon_backward\" viewbox=\"0 0 128 139\">\n      <path\n        d=\"M64 0v11A64 64 0 1 1 0 75h14a50 50 0 1 0 50-50v13L16 19 64 0zm17 45.8c6.6 0 11.8 2.7 15.6 8.3a38 38 0 0 1 5.3 21.3c0 9-1.8 16.1-5.3 21.4a18 18 0 0 1-15.6 8.3c-6.7 0-12-2.8-15.6-8.3a38 38 0 0 1-5.3-21.4c0-9 1.8-16 5.3-21.3 3.7-5.6 8.9-8.3 15.6-8.3zm-32.4 1V104h-9.4V58.2a32.3 32.3 0 0 1-13 7v-9.4a34 34 0 0 0 15.4-9h7zm32.4 7c-4.6 0-7.8 2.5-9.6 7.6-1.3 3.4-2 8.1-2 14.1s.7 10.7 2 14.2c1.8 5 5 7.6 9.6 7.6 4.5 0 7.7-2.6 9.6-7.6 1.3-3.5 2-8.2 2-14.2s-.7-10.7-2-14.1c-2-5.1-5.1-7.6-9.6-7.6z\" />\n    </symbol>\n\n    <symbol id=\"shk-icon_more\" viewbox=\"0 0 64 64\">\n      <path\n        d=\"M8 24a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8zm48 0a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8zm-24 0a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8zm0 0\" />\n    </symbol>\n\n    <symbol id=\"shk-icon_chapter\" viewbox=\"0 0 64 64\">\n      <path d=\"M60.8 55.3H18.1a3.2 3.2 0 1 1 0-6.4h42.8a3.2 3.2 0 0 1 3.1 4.9c-.7 1-1.9 1.6-3.1 1.5zm0-20.2H18.1a3.2 3.2 0 1 1 0-6.4h42.8a3.2 3.2 0 1 1 0 6.4zm0-20H18.1a3.2 3.2 0 1 1 0-6.3h42.8a3.2 3.2 0 0 1 0 6.3zM8.5 12.3a4.2 4.2 0 1 1-8.5 0 4.2 4.2 0 0 1 8.5 0zm0 19.8A4.2 4.2 0 1 1 0 32a4.2 4.2 0 0 1 8.5 0zm0 19.8a4.3 4.3 0 1 1-8.5 0 4.3 4.3 0 0 1 8.5 0zm0 0\"/>\n    </symbol>\n\n    <symbol id=\"shk-icon_unmute\" viewBox=\"0 0 64 66\">\n      <path d=\"M34.3 0c1.5.1 2.6 1.4 2.9 2.8v60.3c-.3 1.4-1.4 2.7-3 2.8-.7.1-1.6-.1-2.6-.7L13.7 50H4.2a4 4 0 0 1-4.1-4V20.6c0-2.2 1.8-4 4-4.1h9.6c.7-.8 17.2-15.1 17.9-15.8 1-.6 1.9-.8 2.6-.7zm6.4 9.3a2 2 0 0 1 2.4-1.6 25.8 25.8 0 0 1 0 50.5l-.4.1a2 2 0 1 1-.4-4.1 21.7 21.7 0 0 0 0-42.5 2 2 0 0 1-1.6-2.4zm4.7 12.8a12.1 12.1 0 0 1 0 21.8 2 2 0 0 1-2.8-1c-.5-1-.1-2.2 1-2.8a8 8 0 0 0 0-14.4 2 2 0 0 1-1-2.7 2 2 0 0 1 2.8-.9zm0 0\"/>\n    </symbol>\n\n    <symbol id=\"shk-icon_mute\" viewBox=\"0 0 64 64\">\n      <path d=\"M33.2 0c-.8 0-1.6.1-2.6.7l-17.4 15H4a4 4 0 0 0-4 4v24.1a4 4 0 0 0 4 4h9.2l17.4 14.5c1 .6 1.8.8 2.6.7 1.4-.1 2.5-1.4 2.8-2.6V2.7C35.7 1.4 34.6 0 33.2 0zm23.2 31.5l6.9-6.8c.7-.6 1-1.5.7-2.4-.2-.8-.9-1.5-1.8-1.7-.8-.2-1.8 0-2.4.7L53 28.1 46 21.3c-.6-.6-1.5-1-2.4-.7-.9.2-1.5.9-1.8 1.7-.2.9.1 1.8.8 2.4l6.9 6.8-7 6.8c-.8 1-.8 2.4.2 3.3.9 1 2.4 1 3.3.1l7-6.8 6.8 6.8c1 .9 2.5.8 3.4 0 1-1 1-2.4 0-3.4l-6.8-6.8zm0 0\"/>\n    </symbol>\n\n    <symbol id=\"shk-icon_triangle\" viewbox=\"0 0 64 64\"><path d=\"M59 29.2L7.8.4A3.2 3.2 0 003 3.2v57.6a3.2 3.2 0 004.8 2.8L59 34.8a3.2 3.2 0 000-5.6z\" /></symbol>\n    <symbol id=\"shk-icon_chart\" viewbox=\"0 0 64 64\"><g transform=\"matrix(1 0 0 -1 0 64)\"><rect x=\"10\" width=\"8\" height=\"54.1\" rx=\"3\"><animate attributeName=\"height\" begin=\"0s\" dur=\"2s\" values=\"64;55;33;5;60;23;58;33;12;14;52;64\" calcMode=\"linear\" repeatCount=\"indefinite\"/></rect><rect x=\"26\" width=\"8\" height=\"32.8\" rx=\"3\"><animate attributeName=\"height\" begin=\"0s\" dur=\"2s\" values=\"50;34;64;23;56;23;34;4;64;54;21;50\" calcMode=\"linear\" repeatCount=\"indefinite\"/></rect><rect x=\"42\" width=\"8\" height=\"42.6\" rx=\"3\"><animate attributeName=\"height\" begin=\"0s\" dur=\"2s\" values=\"30;45;13;64;56;24;45;64;34;23;64;30\" calcMode=\"linear\" repeatCount=\"indefinite\"/></rect></g></symbol>\n    <symbol id=\"shk-icon_close\" viewbox=\"0 0 16 16\"><path d=\"M3.207 14.207a1 1 0 1 1-1.414-1.414l11-11a1 1 0 0 1 1.414 1.414zm11-1.414a1 1 0 0 1-1.414 1.414l-11-11a1 1 0 0 1 1.414-1.414z\"></path></symbol>\n  </svg>\n`\nexport default IconTemplate\n","const CONFIG = {\n  container: document.querySelector('body'),\n  parser: null,\n  fixed: {\n    type: 'auto',\n    position: 'bottom',\n  },\n  download: false,\n  themeColor: '#00869B',\n  theme: 'auto',\n  autoPlay: false,\n  muted: false,\n  preload: 'metadata',\n  speedOptions: [0.5, 0.75, 1.25, 1.5],\n  audio: null,\n\n  // not in options\n  fixedOptions: ['auto', 'static', 'fixed'],\n  audioOptions: {\n    title: 'Unknown Title',\n    artist: 'Unknown Artist',\n    duration: NaN,\n    cover: null,\n    chapters: [],\n    src: null,\n  },\n}\n\n\n\nexport default CONFIG\n","import config from './config'\n\nexport function secondToTime(time) {\n  time = Math.round(time)\n  let hour = Math.floor(time / 3600)\n  let min = Math.floor((time - hour * 3600) / 60)\n  let sec = Math.floor(time - hour * 3600 - min * 60)\n  min = min < 10 ? '0' + min : min\n  sec = sec < 10 ? '0' + sec : sec\n  if (hour === 0) {\n    return `${min}:${sec}`\n  }\n  hour = hour < 10 ? '0' + hour : hour\n  return `${hour}:${min}:${sec}`\n}\n\nexport function numToString(num) {\n  const float = parseFloat(num).toFixed(2)\n  return float.slice(-1) === '0' ? float.slice(0, -1) :float\n}\n\nexport function marquee(textWrap, textEl, speed = 60) {\n  const overflow = textEl.offsetWidth - textWrap.offsetWidth\n  if (overflow > 0) {\n    textWrap.setAttribute('data-overflow', '')\n    const duration = textEl.offsetWidth / speed\n    textWrap.style.animationDuration = `${duration}s`\n  } else {\n    textWrap.removeAttribute('data-overflow')\n  }\n}\n\nexport async function handleOptions(options) {\n  Object.keys(config).forEach(k => {\n    options[k] = (options[k] || typeof options[k] === 'boolean') ?\n      options[k] : config[k]\n  })\n  options.container = options.container() || config.container\n  const fixedType = config.fixedOptions.find(item => item === options.fixed.type)\n  if (!fixedType) {\n    options.fixed.type = config.fixed.type\n  }\n  if (!Array.isArray(options.speedOptions)) {\n    options.speedOptions = [options.speedOptions]\n  }\n  if (options.speedOptions.indexOf(1) === -1) {\n    options.speedOptions.push(1)\n  }\n  options.speedOptions = options.speedOptions\n    .map(sp => parseFloat(sp))\n    .filter(sp => !isNaN(sp))\n  if (options.speedOptions.length > 1) {\n    options.speedOptions.sort((a, b) => a - b)\n  }\n  if (options.audio && options.audio.src) {\n    options.audio = await handleAudio(options.audio, options.parser)\n  } else {\n    throw new Error('Shikwasa: audio source is not specified')\n  }\n  return options\n}\n\nexport async function handleAudio(audio = {}, parser = null) {\n  let audioInfo = {}\n  if (parser && (!audio.title || !audio.artist || !audio.cover)) {\n    try {\n      const { tags } = await parseAudio(audio.src, parser)\n      audioInfo = handleParsedTags(tags)\n    } catch (e) {\n      console.error(e)\n    }\n  } else if (audio.chapters) {\n    audio.chapters.forEach((chap, i) => {\n      chap.id = `ch${i}`\n    })\n  }\n  Object.keys(config.audioOptions).forEach(k => {\n    audioInfo[k] = audio[k] || audioInfo[k] || config.audioOptions[k]\n  })\n  audioInfo.src = audio.src\n  return audioInfo\n}\n\nexport function parseAudio(src, parser) {\n  return new Promise((resolve, reject) => {\n    parser.read(src, {\n      onSuccess: resolve,\n      onError: reject,\n    })\n  })\n}\n\nexport function handleParsedTags(tags) {\n  let cover, chapters, duration\n  const { title, artist } = tags\n  if (tags.picture && tags.picture.data && tags.picture.format) {\n    const byteArray = new Uint8Array(tags.picture.data)\n    const blob = new Blob([byteArray], { type: tags.picture.format })\n    cover = URL.createObjectURL(blob)\n  }\n  if (tags.TLEN && tags.TLEN.data) {\n    duration = +tags.TLEN.data / 1000\n  }\n  if (tags.CHAP && tags.CHAP.length) {\n    chapters = tags.CHAP\n      .filter(ch => ch.id === 'CHAP')\n      .map(ch => {\n        if (ch.data && ch.data.subFrames && ch.data.subFrames.TIT2) {\n          return {\n            id: ch.data.id,\n            startTime: ch.data.startTime / 1000,\n            endTime: ch.data.endTime / 1000,\n            title: ch.data.subFrames.TIT2.data,\n          }\n        }\n        return false\n      })\n      .sort((a, b) => a.id - b.id)\n  }\n  return { title, artist, cover, duration, chapters }\n}\n\nexport function createElement(options) {\n  options.tag = options.tag || 'div'\n  const el = document.createElement(options.tag)\n  if (options.className) {\n    if (typeof options.className === 'string') {\n      el.classList.add(options.className)\n    } else {\n      options.className.forEach(className => {\n        el.classList.add(className)\n      })\n    }\n  }\n  if (options.attrs) {\n    Object.keys(options.attrs).forEach(key => {\n      el.setAttribute(key, options.attrs[key])\n    })\n  }\n  if (options.innerHTML) {\n    el.innerHTML = options.innerHTML\n  }\n  return el\n}\n\nexport function toggleAttribute(el, name) {\n  if (typeof el.toggleAttribute === 'function') {\n    el.toggleAttribute(name)\n    return\n  }\n  if (el.hasAttribute(name)) {\n    el.removeAttribute(name)\n  } else {\n    el.setAttribute(name, '')\n  }\n}\n","/**\n * focus-visible polyfill for button and progress handle from\n * https://github.com/WICG/focus-visible/blob/master/src/focus-visible.js\n * stripped only relevent section and replace manipulating the whole document to only a certain element, i.e. shikwasa player to prevent changing document behavior\n */\nfunction applyFocusVisiblePolyfill(parent) {\n  var hadKeyboardEvent = true\n  var hadFocusVisibleRecently = false\n  var hadFocusVisibleRecentlyTimeout = null\n\n  /**\n   * Helper function for legacy browsers and iframes which sometimes focus\n   * elements like document, body, and non-interactive SVG.\n   * @param {Element} el\n   */\n  function isValidFocusTarget(el) {\n    if (\n      el &&\n      el !== document &&\n      el.nodeName !== 'HTML' &&\n      el.nodeName !== 'BODY' &&\n      'classList' in el &&\n      'contains' in el.classList\n    ) {\n      return true\n    }\n    return false\n  }\n\n  /**\n   * Add the `focus-visible` class to the given element if it was not added by\n   * the author.\n   * @param {Element} el\n   */\n  function addFocusVisibleClass(el) {\n    if (el.classList.contains('focus-visible')) {\n      return\n    }\n    el.classList.add('focus-visible')\n    el.setAttribute('data-focus-visible-added', '')\n  }\n\n  /**\n   * Remove the `focus-visible` class from the given element if it was not\n   * originally added by the author.\n   * @param {Element} el\n   */\n  function removeFocusVisibleClass(el) {\n    if (!el.hasAttribute('data-focus-visible-added')) {\n      return\n    }\n    el.classList.remove('focus-visible')\n    el.removeAttribute('data-focus-visible-added')\n  }\n\n  /**\n   * If the most recent user interaction was via the keyboard;\n   * and the key press did not include a meta, alt/option, or control key;\n   * then the modality is keyboard. Otherwise, the modality is not keyboard.\n   * Apply `focus-visible` to any current active element and keep track\n   * of our keyboard modality state with `hadKeyboardEvent`.\n   * @param {KeyboardEvent} e\n   */\n  function onKeyDown(e) {\n    if (e.metaKey || e.altKey || e.ctrlKey) {\n      return\n    }\n\n    if (isValidFocusTarget(document.activeElement) && parent.contains(document.activeElement)) {\n      addFocusVisibleClass(document.activeElement)\n    }\n\n    hadKeyboardEvent = true\n  }\n\n  /**\n   * If at any point a user clicks with a pointing device, ensure that we change\n   * the modality away from keyboard.\n   * This avoids the situation where a user presses a key on an already focused\n   * element, and then clicks on a different element, focusing it with a\n   * pointing device, while we still think we're in keyboard modality.\n   * @param {Event} e\n   */\n  function onPointerDown() {\n    hadKeyboardEvent = false\n  }\n\n  /**\n   * On `focus`, add the `focus-visible` class to the target if:\n   * - the target received focus as a result of keyboard navigation, or\n   * - the event target is an element that will likely require interaction\n   *   via the keyboard (e.g. a text box)\n   * @param {Event} e\n   */\n  function onFocus(e) {\n    // Prevent IE from focusing the document or HTML element.\n    if (!isValidFocusTarget(e.target)) {\n      return\n    }\n\n    if (hadKeyboardEvent) {\n      addFocusVisibleClass(e.target)\n    }\n  }\n\n  /**\n   * On `blur`, remove the `focus-visible` class from the target.\n   * @param {Event} e\n   */\n  function onBlur(e) {\n    if (!isValidFocusTarget(e.target)) {\n      return\n    }\n\n    if (\n      e.target.classList.contains('focus-visible') ||\n      e.target.hasAttribute('data-focus-visible-added')\n    ) {\n      // To detect a tab/window switch, we look for a blur event followed\n      // rapidly by a visibility change.\n      // If we don't see a visibility change within 100ms, it's probably a\n      // regular focus change.\n      hadFocusVisibleRecently = true\n      window.clearTimeout(hadFocusVisibleRecentlyTimeout)\n      hadFocusVisibleRecentlyTimeout = window.setTimeout(function () {\n        hadFocusVisibleRecently = false\n      }, 100)\n      removeFocusVisibleClass(e.target)\n    }\n  }\n  /**\n   * If the user changes tabs, keep track of whether or not the previously\n   * focused element had .focus-visible.\n   * @param {Event} e\n   */\n  function onVisibilityChange() {\n    if (document.visibilityState === 'hidden') {\n      // If the tab becomes active again, the browser will handle calling focus\n      // on the element (Safari actually calls it twice).\n      // If this tab change caused a blur on an element with focus-visible,\n      // re-apply the class when the user switches back to the tab.\n      if (hadFocusVisibleRecently) {\n        hadKeyboardEvent = true\n      }\n      addInitialPointerMoveListeners()\n    }\n  }\n  function addInitialPointerMoveListeners() {\n    parent.addEventListener('mousemove', onInitialPointerMove)\n    parent.addEventListener('mousedown', onInitialPointerMove)\n    parent.addEventListener('mouseup', onInitialPointerMove)\n    parent.addEventListener('pointermove', onInitialPointerMove)\n    parent.addEventListener('pointerdown', onInitialPointerMove)\n    parent.addEventListener('pointerup', onInitialPointerMove)\n    parent.addEventListener('touchmove', onInitialPointerMove)\n    parent.addEventListener('touchstart', onInitialPointerMove)\n    parent.addEventListener('touchend', onInitialPointerMove)\n  }\n\n  function removeInitialPointerMoveListeners(el) {\n    parent.removeEventListener('mousemove', onInitialPointerMove)\n    parent.removeEventListener('mousedown', onInitialPointerMove)\n    parent.removeEventListener('mouseup', onInitialPointerMove)\n    parent.removeEventListener('pointermove', el)\n    parent.removeEventListener('pointerdown', onInitialPointerMove)\n    parent.removeEventListener('pointerup', onInitialPointerMove)\n    parent.removeEventListener('touchmove', onInitialPointerMove)\n    parent.removeEventListener('touchstart', onInitialPointerMove)\n    parent.removeEventListener('touchend', onInitialPointerMove)\n  }\n  /**\n   * When the polfyill first loads, assume the user is in keyboard modality.\n   * If any event is received from a pointing device (e.g. mouse, pointer,\n   * touch), turn off keyboard modality.\n   * This accounts for situations where focus enters the page from the URL bar.\n   * @param {Event} e\n   */\n  function onInitialPointerMove() {\n    hadKeyboardEvent = false\n    removeInitialPointerMoveListeners()\n  }\n\n  // For some kinds of state, we are interested in changes at the global scope\n  // only. For example, global pointer input, global key presses and global\n  // visibility change should affect the state at every scope:\n  parent.addEventListener('keydown', onKeyDown, true)\n  parent.addEventListener('mousedown', onPointerDown, true)\n  parent.addEventListener('pointerdown', onPointerDown, true)\n  parent.addEventListener('touchstart', onPointerDown, true)\n  parent.addEventListener('visibilitychange', onVisibilityChange, true)\n\n  addInitialPointerMoveListeners()\n\n  // For focus and blur, we specifically care about state changes in the local\n  // scope. This is because focus / blur events that originate from within a\n  // shadow root are not re-dispatched from the host element if it was already\n  // the active element in its own scope:\n  parent.addEventListener('focus', onFocus, true)\n  parent.addEventListener('blur', onBlur, true)\n\n  parent.classList.add('js-focus-visible')\n}\n\nexport default applyFocusVisiblePolyfill\n","import PlayerComp from './templates/Player'\nimport IconComp from './templates/Icon'\nimport { secondToTime, numToString, marquee, createElement, toggleAttribute } from './utils'\nimport applyFocusVisible from './focus-visible'\n\nlet resize, coverUrl = null, cooldown = true\n\nexport default class UI {\n  constructor(options) {\n    this.mounted = false\n    if (!document.querySelector('.shk-icons')) {\n      this.icons = createElement({\n        className: 'shk-icons',\n        innerHTML: IconComp,\n      })\n    }\n    this.initEl()\n    this.initOptions(options)\n  }\n\n  async initEl() {\n    this.el = createElement({\n      className: ['shk', 'shikwasa'],\n      attrs: {\n        'data-name': 'shikwasa',\n      },\n      innerHTML: PlayerComp,\n    })\n    this.playBtn = this.el.querySelector('.shk-btn_toggle')\n    this.fwdBtn = this.el.querySelector('.shk-btn_forward')\n    this.bwdBtn = this.el.querySelector('.shk-btn_backward')\n    this.speedBtn = this.el.querySelector('.shk-btn_speed')\n    this.moreBtn = this.el.querySelector('.shk-btn_more')\n    this.muteBtn = this.el.querySelector('.shk-btn_volume')\n    this.extraControls = this.el.querySelector('.shk-controls_extra')\n    this.texts = this.el.querySelector('.shk-text')\n    this.artist = this.el.querySelector('.shk-artist')\n    this.artistWrap = this.el.querySelector('.shk-artist_wrap')\n    this.titleWrap = this.el.querySelector('.shk-title_wrap')\n    this.titleInner = this.el.querySelector('.shk-title_inner')\n    this.title = this.el.querySelector('.shk-title')\n    this.currentTime = this.el.querySelector('.shk-time_now')\n    this.duration = this.el.querySelector('.shk-time_duration')\n    this.bar = this.el.querySelector('.shk-bar')\n    this.barWrap = this.el.querySelector('.shk-bar_wrap')\n    this.audioPlayed = this.el.querySelector('.shk-bar_played')\n    this.audioLoaded = this.el.querySelector('.shk-bar_loaded')\n    this.handle = this.el.querySelector('.shk-bar-handle')\n    this.cover = this.el.querySelector('.shk-cover')\n    this.seekControls = [\n      this.fwdBtn,\n      this.bwdBtn,\n      this.handle,\n    ]\n  }\n\n  initOptions(options) {\n\n    // dark mode\n    this.el.style = `--color-primary: ${options.themeColor}; --color-handle-shadow: ${options.themeColor}cc`\n    this.el.setAttribute('data-theme', options.theme)\n\n    // download\n    if (options.download && options.audio && options.audio.src) {\n      this.downloadBtn = createElement({\n        tag: 'a',\n        className: ['shk-btn', 'shk-btn_download'],\n        attrs: {\n          title: 'download',\n          'aria-label': 'download',\n          href: typeof options.download === 'string' ? options.download : options.audio.src,\n          download: '',\n          target: '_blank',\n          rel: 'noopener noreferrer',\n        },\n        innerHTML: /* html */`\n          <svg aria-hidden=\"true\">\n            <use xlink:href=\"#shk-icon_download\" />\n          </svg>\n        `,\n      })\n      this.extraControls.append(this.downloadBtn)\n    }\n\n    // player position\n    this.el.setAttribute('data-fixed-type', options.fixed.type)\n    if (options.fixed.type !== 'static' && options.fixed.position === 'top') {\n      this.el.setAttribute('data-fixed-pos', options.fixed.position)\n    }\n\n    // player status display\n    const playStatus = options.autoPlay ? 'playing' : 'paused'\n    this.el.setAttribute('data-play', playStatus)\n\n    // mute status display\n    if (options.muted) {\n      this.el.setAttribute('data-mute', '')\n    }\n  }\n\n  initEvents() {\n    this.moreBtn.addEventListener('click', () => {\n      toggleAttribute(this.el, 'data-extra')\n    })\n    Array.from(this.extraControls.children).forEach(el => {\n      this.hideExtraControl(el)\n    })\n\n    // add keyboard focus style\n    applyFocusVisible(this.el)\n\n    resize = () => {\n      if (!cooldown) return\n      cooldown = false\n      setTimeout(() => cooldown = true, 100)\n      marquee.call(this, this.titleWrap, this.title)\n    }\n    window.addEventListener('resize', resize)\n  }\n\n  setAudioInfo(audio = {}) {\n    if (coverUrl) {\n      URL.revokeObjectURL(coverUrl)\n      coverUrl = null\n    }\n    if (/blob/.test(audio.cover)) {\n      coverUrl = audio.cover\n    }\n    if (audio.cover) {\n      this.cover.style.backgroundImage = `url(${audio.cover})`\n    } else {\n      this.cover.style.backgroundImage = 'none'\n    }\n    this.title.innerHTML = audio.title\n    this.titleInner.setAttribute('data-title', audio.title)\n    this.artist.innerHTML = audio.artist\n    this.currentTime.innerHTML = '00:00'\n    this.duration.innerHTML = audio.duration ? secondToTime(audio.duration) : '00:00'\n    if (this.downloadBtn) {\n      this.downloadBtn.href= audio.src\n    }\n    if (!audio.duration) {\n      this.seekControls.forEach(el => el.setAttribute('disabled', ''))\n    } else {\n      this.seekControls.forEach(el => el.removeAttribute('disabled'))\n    }\n    this.setBar('loaded', 0)\n  }\n\n  setPlaying() {\n    this.el.setAttribute('data-play', 'playing')\n  }\n\n  setPaused() {\n    this.el.setAttribute('data-play', 'paused')\n    this.el.removeAttribute('data-loading')\n  }\n\n  setTime(type, time) {\n    this[type].innerHTML = secondToTime(time)\n  }\n\n  setBar(type, percentage) {\n    const typeName = 'audio' + type.charAt(0).toUpperCase() + type.substr(1)\n    percentage = Math.min(percentage, 1)\n    percentage = Math.max(percentage, 0)\n    this[typeName].style.width = percentage * 100 + '%'\n    const ariaNow = percentage.toFixed(2)\n    this[typeName].setAttribute('aria-valuenow', ariaNow)\n    this.handle.setAttribute('aria-valuenow', ariaNow)\n  }\n\n  setProgress(time = 0, percentage = 0, duration = 0) {\n    if (time && !percentage) {\n      percentage = duration ? time / duration : 0\n    } else {\n      time = percentage * (duration || 0)\n    }\n    this.setTime('currentTime', time)\n    this.setBar('played', percentage)\n  }\n\n  setSpeed(speed) {\n    this.speedBtn.innerHTML = numToString(speed) + 'x'\n  }\n\n  getPercentByPos(e) {\n    const handlePos = e.clientX || (e.changedTouches && e.changedTouches[0].clientX) || 0\n    const initPos = this.barWrap.getBoundingClientRect().left\n    const barLength = this.barWrap.clientWidth\n    let percentage = (handlePos - initPos) / barLength\n    percentage = Math.min(percentage, 1)\n    percentage = Math.max(0, percentage)\n    return percentage\n  }\n\n  hideExtraControl(el) {\n    el.addEventListener('click', () => {\n      setTimeout(() => {\n        this.el.removeAttribute('data-extra')\n      }, 800)\n    })\n  }\n\n  mount(container) {\n    container.innerHTML = ''\n    container.append(this.el)\n    if (this.icons) {\n      container.append(this.icons)\n    }\n    this.mounted = true\n    this.initEvents()\n    marquee(this.titleWrap, this.title)\n  }\n\n  destroy() {\n    window.removeEventListener('resize', resize)\n    if (coverUrl) {\n      URL.revokeObjectURL(coverUrl)\n    }\n  }\n}\n","export default class Events {\n  constructor() {\n    this.audioEvents = ['abort', 'canplay', 'canplaythrough', 'complete', 'durationchange', 'emptied', 'ended', 'error', 'loadeddata', 'loadedmetadata', 'loadstart', 'pause', 'play', 'playing', 'progress', 'ratechange', 'seeked', 'seeking', 'stalled', 'suspend', 'timeupdate', 'volumechange', 'waiting']\n    this.playerEvents = ['inited', 'audioupdate']\n    this.events = {}\n  }\n\n  on(name, callback) {\n    if (this.type(name) && typeof callback == 'function') {\n      if (!this.events[name]) {\n        this.events[name] = []\n      }\n      this.events[name].push(callback)\n    }\n  }\n\n  trigger(name, data = {}) {\n    if (this.events[name] && this.events[name].length) {\n      this.events[name].forEach(fn => fn(data))\n    }\n  }\n\n  type(name) {\n    if (this.playerEvents.indexOf(name) !== -1) {\n      return 'player'\n    } else if (this.audioEvents.indexOf(name) !== -1) {\n      return 'audio'\n    }\n    console.error(`Shikwasa: unknown event name: ${name}`)\n    return null\n  }\n}\n","import UI from './ui'\nimport Events from './events'\nimport { toggleAttribute, handleOptions, handleAudio } from './utils'\n\nconst playerArr = []\nconst REGISTERED_COMPS = []\nconst isMobile = typeof window !== 'undefined' ? /mobile/i.test(window.navigator.userAgent) : false\nconst dragStart = isMobile ? 'touchstart' : 'mousedown'\nconst dragMove = isMobile ? 'touchmove' : 'mousemove'\nconst dragEnd = isMobile ? 'touchend' : 'mouseup'\n\nclass Player {\n  constructor(options) {\n    this.id = playerArr.length\n    playerArr.push(this)\n    this.comps = {}\n    this._audio = {}\n    this._hasMediaSession = false\n    this._initSeek = 0\n    this._canplay = false\n    this._dragging = false\n    this.events = new Events()\n    this.created(options)\n  }\n\n  async created(options) {\n    this.options = await handleOptions(options)\n    this._renderComponents()\n    this.initUI(options)\n    this.initAudio()\n    this.events.trigger('inited')\n    this.ui.mount(this.options.container)\n  }\n\n  get duration() {\n    if (!this.audio || !this.audio.duration) {\n      return this._audio.duration\n    }\n    return this.audio.duration\n  }\n\n  get seekable() {\n    return Boolean(this.duration)\n  }\n\n  set seekable(v) {\n    if (v !== true) return\n    this.ui.seekControls.forEach(el => {\n      el.removeAttribute('disabled')\n    })\n  }\n\n  get currentTime() {\n    return this.audio ? this.audio.currentTime : undefined\n  }\n\n  get playbackRate() {\n    return this.audio ? this.audio.playbackRate : undefined\n  }\n\n  set playbackRate(v) {\n    if (this.audio) {\n      this.audio.playbackRate = v\n      this.audio.defaultPlaybackRate = v\n    }\n  }\n\n  get muted() {\n    return this.audio ? this.audio.muted : undefined\n  }\n\n  set muted(v) {\n    if (this.audio) {\n      this.audio.muted = v\n      this.audio.defaultMuted = v\n    }\n  }\n\n  initUI() {\n    this.ui = new UI(this.options)\n    this.el = this.ui.el\n    this.initControlEvents()\n    this.initBarEvents()\n  }\n\n  initControlEvents() {\n    this.ui.playBtn.addEventListener('click', () => {\n      this.toggle()\n    })\n    this.ui.muteBtn.addEventListener('click', () => {\n      this.muted = !this.muted\n      toggleAttribute(this.el, 'data-mute')\n    })\n    this.ui.fwdBtn.addEventListener('click', () => {\n      this.seekBySpan()\n    })\n    this.ui.bwdBtn.addEventListener('click', () => {\n      this.seekBySpan({ forward: false })\n    })\n    this.ui.speedBtn.addEventListener('click', () => {\n      const index = this.options.speedOptions.indexOf(this.playbackRate)\n      const speedRange = this.options.speedOptions\n      this.playbackRate = (index + 1 >= speedRange.length) ? speedRange[0] : speedRange[index + 1]\n      this.ui.setSpeed(this.playbackRate)\n    })\n  }\n\n  initBarEvents() {\n    let targetTime = 0\n    const dragStartHandler = (e) => {\n      if (!this.seekable) return\n      e.preventDefault()\n      this.el.setAttribute('data-seeking', '')\n      this._dragging = true\n      document.addEventListener(dragMove, dragMoveHandler)\n      document.addEventListener(dragEnd, dragEndHandler)\n    }\n    const dragMoveHandler = (e) => {\n      this.ui.setProgress(null, this.ui.getPercentByPos(e), this.duration)\n    }\n    const dragEndHandler = (e) => {\n      e.preventDefault()\n      document.removeEventListener(dragMove, dragMoveHandler)\n      document.removeEventListener(dragEnd, dragEndHandler)\n      targetTime = this.ui.getPercentByPos(e) * this.duration\n      this.seek(targetTime)\n      this._dragging = false\n\n      // disable barPlayed transition on drag\n      setTimeout(() => this.el.removeAttribute('data-seeking'), 50)\n    }\n\n    // seeking with keyboard\n    const keydownHandler = (e) => {\n      if (!this.seekable) return\n\n      // for early browser compatibility\n      const key = e.key.replace('Arrow', '')\n\n      const backwardKeys = ['Left', 'Down']\n      const forwardKeys = ['Right', 'Up']\n      const largeStepKeys = ['pageDown', 'pageUp']\n      const edgeKeys = ['Home', 'End']\n      const isBack = backwardKeys.indexOf(key) !== -1\n      const isFwd = forwardKeys.indexOf(key) !== -1\n      const isWayBack = key === largeStepKeys[0]\n      const isWayFwd = key === largeStepKeys[1]\n      const isStart = key === edgeKeys[0]\n      const isEnd = key === edgeKeys[1]\n      if (!isBack && !isFwd && largeStepKeys.indexOf(key) === -1 && edgeKeys.indexOf(key) === -1) {\n        return\n      }\n      if (isStart) {\n        this.seek(0)\n      }\n      if (isEnd) {\n        this.seek(this.duration)\n      }\n      const step = (isWayFwd || isWayBack ? 0.1 : 0.01) * (isFwd || isWayFwd ? 1 : -1)\n      const currentTime = this._canplay ? this.currentTime : this._initSeek\n      const time = step * this.duration + currentTime\n      this.seek(time)\n    }\n    this.ui.barWrap.addEventListener(dragStart, dragStartHandler)\n    this.ui.handle.addEventListener('keydown', keydownHandler)\n  }\n\n  initAudio() {\n    if (this.options.audio.src) {\n      this.audio = new Audio()\n      this.initAudioEvents()\n      this.events.audioEvents.forEach(name => {\n        this.audio.addEventListener(name, (e) => {\n          this.events.trigger(name, e)\n        })\n      })\n      this.audio.preload = this.options.preload\n      this.muted = this.options.muted\n      this.update(this.options.audio)\n    }\n  }\n\n  initAudioEvents() {\n    this.on('play', () => {\n      this.ui.setPlaying()\n      playerArr.forEach(player => {\n        if (player.id !== this.id && player.audio && !player.audio.paused) {\n          player.pause()\n        }\n      })\n    })\n    this.on('pause', () => {\n      this.ui.setPaused()\n    })\n    this.on('ended', () => {\n      this.ui.setPaused()\n      this.seek(0)\n    })\n    this.on('waiting', () => {\n      this.el.setAttribute('data-loading', '')\n    })\n    this.on('durationchange', () => {\n      if (this.duration && this.duration !== 1) {\n        this.seekable = true\n        this.ui.setTime('duration', this.duration)\n      }\n    })\n    this.on('canplay', () => {\n      if (!this._canplay) {\n        this._canplay = true\n        if (this._initSeek) {\n          this.seek(this._initSeek)\n          this._initSeek = 0\n        }\n      }\n    })\n    this.on('canplaythrough', () => {\n      this.el.removeAttribute('data-loading')\n    })\n    this.on('progress', () => {\n      if (this.audio.buffered.length) {\n        const percentage = this.audio.buffered.length ? this.audio.buffered.end(this.audio.buffered.length - 1) / this.duration : 0\n        this.ui.setBar('loaded', percentage)\n      }\n    })\n    this.on('timeupdate', () => {\n      if (!this._dragging) {\n        this.ui.setProgress(this.audio.currentTime, null, this.duration)\n      }\n    })\n    this.on('abort', () => {\n      this.ui.setPaused()\n    })\n  }\n\n  initMediaSession() {\n    if ('mediaSession' in navigator) {\n      this._hasMediaSession = true\n      this.setMediaMetadata(this.options.audio)\n      const controls = {\n        play: this.play,\n        pause: this.pause,\n        seekforward: this.seekBySpan,\n        seekbackward: () => this.seekBySpan({ forward: false }),\n      }\n      Object.keys(controls).forEach(key => {\n        navigator.mediaSession.setActionHandler(key, () => {\n          controls[key]()\n        })\n      })\n    }\n  }\n\n  setMediaMetadata(audio) {\n    /* global MediaMetadata */\n    navigator.mediaSession.metadata = new MediaMetadata({\n      title: audio.title,\n      artist: audio.artist,\n      artwork: [{ src: audio.cover }],\n    })\n  }\n\n  on(name, callback) {\n    this.events.on(name, callback)\n  }\n\n  play() {\n    if (!this.audio.paused) return\n    const promise = this.audio.play()\n    if (promise instanceof Promise) {\n      promise.then(() => {\n        this.initMediaSession()\n      })\n      promise.catch((e) => {\n        if (e.name === 'NotAllowedError' || e.name === 'NotSupportedError') {\n          this.pause()\n        }\n      })\n    } else {\n      this.initMediaSession()\n    }\n  }\n\n  pause() {\n    if (this.audio.paused) return\n    this.audio.pause()\n  }\n\n  toggle() {\n    this.audio.paused ? this.play() : this.pause()\n  }\n\n  seek(time) {\n    if (!this.seekable) return\n    time = parseInt(time)\n    if (isNaN(time)) {\n      console.error('TypeError: seeking time is NaN')\n    }\n    time = Math.min(time, this.duration)\n    time = Math.max(time, 0)\n    this.ui.setProgress(time, null, this.duration)\n    if (!this._canplay) {\n      this._initSeek = time\n    } else {\n      this.audio.currentTime = time\n    }\n  }\n\n  seekBySpan({ time = 10, forward = true } = {}) {\n    const currentTime = this._canplay ? this.audio.currentTime : this._initSeek\n    const targetTime = currentTime + time * (forward ? 1 : -1)\n    this.seek(targetTime)\n  }\n\n  async update(audio) {\n    this._audio = this._inited ?\n      await handleAudio(audio, this.options.parser) :\n      audio\n    this._canplay = false\n    this.audio.src = this._audio.src\n    this.audio.title = this._audio.title\n    this.events.trigger('audioupdate', this._audio)\n    this.ui.setAudioInfo(this._audio)\n    if (this._hasMediaSession) {\n      this.setMediaMetadata(this._audio)\n    }\n  }\n\n  destroyAudio() {\n    this.audio.pause()\n    this.audio.src = ''\n    this.audio.load()\n    this.audio = null\n  }\n\n  destroy() {\n    this.destroyAudio()\n    this.ui.destroy()\n    Object.keys(this.comps).forEach(k => {\n      if (this.comps[k].destroy &&\n        typeof this.comps[k].destroy === 'function') {\n        this.comps[k].destroy()\n      }\n    })\n    this.comps = null\n    this.options.container.innerHTML = ''\n  }\n\n  _renderComponents() {\n    if (!REGISTERED_COMPS.length) return\n    REGISTERED_COMPS.forEach(comp => {\n      const name = comp.name.toLowerCase()\n      this.comps[name] = new comp(this)\n    })\n  }\n}\n\nPlayer.use = function (comp) {\n  REGISTERED_COMPS.push(comp)\n}\n\nexport default Player\n","import './css/base.css'\nimport Shikwasa from './player'\n\nexport default Shikwasa\n/** CONSOLE_MSG */\n\n"],"names":["PlayerTemplate","IconTemplate","CONFIG","container","document","querySelector","parser","fixed","type","position","download","themeColor","theme","autoPlay","muted","preload","speedOptions","audio","fixedOptions","audioOptions","title","artist","duration","NaN","cover","chapters","src","secondToTime","time","Math","round","hour","floor","min","sec","numToString","num","float","parseFloat","toFixed","slice","marquee","textWrap","textEl","speed","overflow","offsetWidth","setAttribute","style","animationDuration","removeAttribute","handleOptions","options","Object","keys","config","forEach","k","fixedType","find","item","Array","isArray","indexOf","push","map","sp","filter","isNaN","length","sort","a","b","handleAudio","Error","audioInfo","tags","parseAudio","handleParsedTags","e","console","error","chap","i","id","Promise","resolve","reject","read","onSuccess","onError","picture","data","format","byteArray","Uint8Array","blob","Blob","URL","createObjectURL","TLEN","CHAP","ch","subFrames","TIT2","startTime","endTime","createElement","tag","el","className","classList","add","attrs","key","innerHTML","toggleAttribute","name","hasAttribute","applyFocusVisiblePolyfill","parent","hadKeyboardEvent","hadFocusVisibleRecently","hadFocusVisibleRecentlyTimeout","isValidFocusTarget","nodeName","addFocusVisibleClass","contains","removeFocusVisibleClass","remove","onKeyDown","metaKey","altKey","ctrlKey","activeElement","onPointerDown","onFocus","target","onBlur","window","clearTimeout","setTimeout","onVisibilityChange","visibilityState","addInitialPointerMoveListeners","addEventListener","onInitialPointerMove","removeInitialPointerMoveListeners","removeEventListener","resize","coverUrl","cooldown","UI","constructor","mounted","icons","IconComp","initEl","initOptions","PlayerComp","playBtn","fwdBtn","bwdBtn","speedBtn","moreBtn","muteBtn","extraControls","texts","artistWrap","titleWrap","titleInner","currentTime","bar","barWrap","audioPlayed","audioLoaded","handle","seekControls","downloadBtn","href","rel","append","playStatus","initEvents","from","children","hideExtraControl","applyFocusVisible","call","setAudioInfo","revokeObjectURL","test","backgroundImage","setBar","setPlaying","setPaused","setTime","percentage","typeName","charAt","toUpperCase","substr","max","width","ariaNow","setProgress","setSpeed","getPercentByPos","handlePos","clientX","changedTouches","initPos","getBoundingClientRect","left","barLength","clientWidth","mount","destroy","Events","audioEvents","playerEvents","events","on","callback","trigger","fn","playerArr","REGISTERED_COMPS","isMobile","navigator","userAgent","dragStart","dragMove","dragEnd","Player","comps","_audio","_hasMediaSession","_initSeek","_canplay","_dragging","created","_renderComponents","initUI","initAudio","ui","seekable","Boolean","v","undefined","playbackRate","defaultPlaybackRate","defaultMuted","initControlEvents","initBarEvents","toggle","seekBySpan","forward","index","speedRange","targetTime","dragStartHandler","preventDefault","dragMoveHandler","dragEndHandler","seek","keydownHandler","replace","backwardKeys","forwardKeys","largeStepKeys","edgeKeys","isBack","isFwd","isWayBack","isWayFwd","isStart","isEnd","step","Audio","initAudioEvents","update","player","paused","pause","buffered","end","initMediaSession","setMediaMetadata","controls","play","seekforward","seekbackward","mediaSession","setActionHandler","metadata","MediaMetadata","artwork","promise","then","catch","parseInt","_inited","destroyAudio","load","comp","toLowerCase","use"],"mappings":"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"}